{% extends "layout/base.html" %} {% from "layout/card.html" import card %} {% block breadcrumb %}Vota√ß√µes ‚Ä¢ Resultados da Rodada{% endblock %} {% block page_title %}Resultados da Rodada{% endblock %} {% block content %} {% call card("üèÜ Resultados da Rodada", (votacoes|length) ~ " vota√ß√£o(√µes)", "trophy", "purple") %} {% if tipo_filtro %} <div class="mb-4 text-xs text-slate-600 flex items-center gap-2 px-3 py-2 rounded-md bg-blue-50/60"> <i data-lucide="filter" class="w-3.5 h-3.5"></i> Filtrado por: <span class="font-semibold text-slate-900">{{ tipo_filtro }}</span> </div> {% endif %} {% if votacoes and votacoes|length %} <div class="space-y-4"> {% for v in votacoes %} {% set votacao = v.votacao or {} %} {% set ranking = v.resultado or [] %} {% set total_votos = v.total_votos or 0 %} {% set vencedor = v.vencedor or {} %} <div class="rounded-md bg-white/60 backdrop-blur-xl overflow-hidden hover: transition-all"> <!-- Header --> <div class="px-5 py-4 flex items-center justify-between bg-gradient-to-r from-slate-50/50 to-transparent"> <div> <div class="text-sm font-medium text-slate-900">{{ votacao.tipo or "Vota√ß√£o" }}</div> <div class="text-xs text-slate-500 mt-1">{{ total_votos }} voto(s)</div> </div> <a href="{{ url_for('votacoes.resultado', votacao_id=votacao.id, rodada_id=rodada_id) }}" class="h-10 px-4 rounded-md bg-white/80 hover:bg-white text-xs font-medium text-slate-700 inline-flex items-center gap-2 transition-all "> <i data-lucide="maximize-2" class="w-3.5 h-3.5"></i> Ver detalhes </a> </div> <!-- Vencedor (se houver) --> {% if vencedor and vencedor.jogador %} {% set venc_jogador = vencedor.jogador %} <div class="px-5 py-4 bg-gradient-to-r from-yellow-50/80 to-orange-50/80"> <div class="flex items-center gap-3"> <div class="text-2xl">ü•á</div> <div class="flex-1"> <div class="text-sm font-medium text-yellow-600"> {{ venc_jogador.apelido or venc_jogador.nome_completo }} </div> <div class="text-xs text-slate-700 mt-1"> {{ vencedor.votos }} voto(s) ‚Ä¢ {{ "%.1f"|format(vencedor.porcentagem or 0) }}% ‚Ä¢ {{ vencedor.total_pontos }} pts </div> </div> </div> </div> {% endif %} <!-- Top 3 (resumido) --> {% if ranking and ranking|length %} <div class="px-5 py-4 space-y-2.5"> {% for item in ranking[:3] %} {% set pos = loop.index %} {% set jogador = item.jogador or {} %} <div class="flex items-center gap-3 text-xs"> <div class="w-7 text-center font-medium text-sm {% if pos == 1 %}text-yellow-600 {% elif pos == 2 %}text-slate-600 {% elif pos == 3 %}text-amber-700 {% else %}text-slate-500{% endif %} "> {{ pos }}¬∫ </div> <div class="flex-1 text-slate-900 truncate font-medium"> {{ jogador.apelido or jogador.nome_completo }} </div> <div class="text-slate-600 font-semibold"> {{ item.total_pontos }} pts </div> </div> {% endfor %} {% if ranking|length > 3 %} <div class="text-[11px] text-slate-500 text-center pt-2"> + {{ ranking|length - 3 }} jogador(es) </div> {% endif %} </div> {% else %} <div class="px-5 py-4 text-xs text-slate-500 text-center"> Nenhum voto ainda </div> {% endif %} </div> {% endfor %} </div> {% else %} <div class="text-center py-12"> <div class="w-16 h-16 rounded-md bg-purple-50/80 backdrop-blur-xl grid place-items-center mx-auto mb-4 text-purple-400 "> <i data-lucide="trophy" class="w-8 h-8 opacity-50"></i> </div> <div class="text-sm text-slate-800 font-semibold">Nenhuma vota√ß√£o encontrada</div> <div class="text-xs text-slate-500 mt-1.5">Crie uma vota√ß√£o para come√ßar</div> </div> {% endif %} {% endcall %} <div class="flex gap-3 mt-6"> <a href="{{ url_for('votacoes.criar', rodada_id=rodada_id) }}" class="flex-1 h-12 rounded-md bg-white/60 backdrop-blur-xl text-sm font-medium text-slate-700 inline-flex items-center justify-center gap-2 transition-all hover:"> <i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar </a> <a href="{{ url_for('votacoes.criar', rodada_id=rodada_id) }}" class="flex-1 h-12 rounded-md bg-blue-50/80 hover:bg-blue-50 text-sm font-medium text-blue-700 inline-flex items-center justify-center gap-2 transition-all "> <i data-lucide="plus" class="w-4 h-4"></i> Nova Vota√ß√£o </a> </div> {% endblock %} 